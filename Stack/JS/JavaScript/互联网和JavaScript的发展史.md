# 互联网和JavaScript的发展史

JavaScript 因为互联网而生，紧跟着浏览器的出现而问世。回顾它的历史，就要从浏览器的历史讲起。

### 1.1	诞生 

1990年底，欧洲核能研究组织（CERN）科学家 Tim Berners-Lee，在全世界最大的电脑网络——互联网的基础上，发明了万维网（World Wide Web），从此可以在网上浏览网页文件。最早的网页只能在操作系统的终端里浏览，也就是说只能使用命令行操作，网页都是在字符窗口中显示，这当然非常不方便。

1992年底，美国国家超级电脑应用中心（NCSA）开始开发一个独立的浏览器，叫做 Mosaic。这是人类历史上第一个浏览器，从此网页可以在图形界面的窗口浏览。 

![](http://www.ruanyifeng.com/blogimg/asset/201106/bg2011062401.jpg)

1994年10月，NCSA 的一个主要程序员 Marc Andreessen 联合风险投资家 Jim Clark，成立了 Mosaic 通信公司（Mosaic Communications），不久后改名为 Netscape。这家公司的方向，就是在 Mosaic 的基础上，开发面向普通用户的新一代的浏览器 Netscape Navigator。

1994年12月，Navigator 发布了1.0版，市场份额一举超过90%。

随着网上冲浪越来越流行，对于开发客户端脚本的需求也逐渐增大。此时，大部分因特网用户还仅仅通过 28.8 kbit/s 的调制解调器连接到网络，即便这时网页已经不断地变得更大和更复杂。而更加加剧用户痛苦的是，仅仅为了简单的表单有效性验证，就要与服务器进行多次地往返交互。设想一下，用户填完一个表单，点击提交按钮，等待了 30 秒的处理后，看到的却是一条告诉你忘记填写一个必要的字段。

Netscape 公司很快发现，Navigator 浏览器需要一种可以嵌入网页的脚本语言，用来控制浏览器行为。 比如，如果用户忘记填写“用户名”，就点了“发送”按钮，到服务器再发现这一点就有点太晚了，最好能在用户发出数据之前，就告诉用户“请填写用户名”。这就需要在网页中嵌入小程序，让浏览器检查每一栏是否都填写了。

管理层对这种浏览器脚本语言的设想是：功能不需要太强，语法较为简单，容易学习和部署。那一年，正逢 Sun 公司的 Java 语言问世，市场推广活动非常成功。Netscape 公司决定与 Sun 公司合作，浏览器支持嵌入 Java 小程序（后来称为 Java applet）。但是，浏览器脚本语言是否就选用 Java，则存在争论。后来，还是决定不使用 Java，因为网页小程序不需要 Java 这么“重”的语法。但是，同时也决定脚本语言的语法要接近 Java，并且可以支持 Java 程序。这些设想直接排除了使用现存语言，比如 Perl、Python 和 TCL。

1995年，Netscape 公司雇佣了程序员 Brendan Eich 开发这种网页脚本语言。Brendan Eich 有很强的函数式编程背景，希望以 Scheme 语言（函数式语言鼻祖 LISP 语言的一种方言）为蓝本，实现这种新语言。

1995年5月，Brendan Eich 只用了10天，就设计完成了这种语言的第一版。它是一个大杂烩，语法有多个来源。

```
基本语法：借鉴 C 语言和 Java 语言。
数据结构：借鉴 Java 语言，包括将值分成原始值和对象两大类。
函数的用法：借鉴 Scheme 语言和 Awk 语言，将函数当作第一等公民，并引入闭包。
原型继承模型：借鉴 Self 语言（Smalltalk 的一种变种）。
正则表达式：借鉴 Perl 语言。
字符串和数组处理：借鉴 Python 语言。
```

为了保持简单，这种脚本语言缺少一些关键的功能，比如块级作用域、模块、子类型（subtyping）等等，但是可以利用现有功能找出解决办法。这种功能的不足，直接导致了后来 JavaScript 的一个显著特点：对于其他语言，你需要学习语言的各种功能，而对于 JavaScript，你常常需要学习各种解决问题的模式。而且由于来源多样，从一开始就注定，JavaScript 的编程风格是函数式编程和面向对象编程的一种混合体。

Netscape 公司的这种浏览器脚本语言，最初名字叫做 Mocha，1995年9月改为 LiveScript。12月，Netscape 公司与 Sun 公司（Java 语言的发明者和所有者）达成协议，后者允许将这种语言叫做 JavaScript。这样一来，Netscape 公司可以借助 Java 语言的声势，而 Sun 公司则将自己的影响力扩展到了浏览器。

之所以起这个名字，并不是因为 JavaScript 本身与 Java 语言有多么深的关系（事实上，两者关系并不深，详见下节），而是因为 Netscape 公司已经决定，使用 Java 语言开发网络应用程序，JavaScript 可以像胶水一样，将各个部分连接起来。当然，后来的历史是 Java 语言的浏览器插件失败了，JavaScript 反而发扬光大。

1995年12月4日，Netscape 公司与 Sun 公司联合发布了 JavaScript 语言，对外宣传 JavaScript 是 Java 的补充，属于轻量级的 Java，专门用来操作网页。

1996年3月，Navigator 2.0 浏览器正式内置了 JavaScript 脚本语言。



#### JavaScript 和 Java的关系

> 这里专门说一下 JavaScript 和 Java 的关系。它们是两种不一样的语言，但是彼此存在联系。
>
> JavaScript 的基本语法和对象体系，是模仿 Java 而设计的。但是，JavaScript 没有采用 Java 的静态类型。正是因为 JavaScript 与 Java 有很大的相似性，所以这门语言才从一开始的 LiveScript 改名为 JavaScript。基本上，JavaScript 这个名字的原意是“很像Java的脚本语言”。
>
> JavaScript 语言的函数是一种独立的数据类型，以及采用基于原型对象（prototype）的继承链。这是它与 Java 语法最大的两点区别。JavaScript 语法要比 Java 自由得多。
>
> 另外，Java 语言需要编译，而 JavaScript 语言则是运行时由解释器直接执行。
>
> 总之，JavaScript 的原始设计目标是一种小型的、简单的动态语言，与 Java 有足够的相似性，使得使用者（尤其是 Java 程序员）可以快速上手。



### 1.2	浏览器大战

一直到 1995 年中，市场上的网页浏览器标准都以 Netscape 主导，没公司相争，也没公司想争。随着网景的发展，它已多次尝试创做一种能够让用户通过浏览器操作的网络应用系统。这引起微软注意，担心网景可能威胁到微软的操作系统和应用程序市场。

> 这个就类似于微信客户端是苹果手机的一款应用，但是微信自己还搞了一个内置应用——小程序，这会直接影响苹果商店的应用使用问题，苹果当然会很警惕，只不过在这次较量中微信的头比苹果的硬而已。 

微软是第一个破局者。微软作为IT界老大，看到JavaScript 1.0 如此成功必然心里不舒服，于是在1995年买下Mosaic的授权，在获取 Mosaic 的授权后，微软迅速推出了 Internet Explorer 1.0，并于 1995 年 8 月起通过“Windows 95 Plus ! ”搭配出售。

但是我们要清楚一点，微软最初的商业侧重点并不是互联网，而是PC 操作系统这块市场，到底是谁给了微软这么大的决心，要和几乎已经在浏览器市场坐稳的网景公司“背水一战”？是比尔·盖茨！

1995 年 5 月 26 日，比尔盖茨向微软内部所有员工发送了一份名为“互联网潮汐”的备忘录。在备忘录里，盖茨明确表示，他打算集中公司所有的技术力量，all in 互联网。

盖茨在这份备忘录里发出警示：“互联网用户聚集在一起，也许会创造出比 PC 更有价值的东西。目前我不认为我们的产品可以做到，不过，我们已经找到了一个出生在互联网上的对手，Netscape，它是我们必须要打败的。”

> #### 备忘录内容
>
> 我们可以对过去 20 年的愿景做个简洁的概括，我们看到计算机功能发生了指数级的改进，这使得优秀的软件变得越来越有价值。对此，我们的回应是，建立一个足以提供最佳软件产品的系统。
>
> 我们相信，在未来 20 年，计算机将对工作、学习和游戏产生根本性的影响。而出色的软件产品对于实现这些进步至关重要。
>
> 大多数用户没有预判到未来通信价格将大幅下降。当前的有线电话网络仍在使用旧技术。PC 刚刚开始创造出额外的需求，这将推动一股新的投资浪潮。扩张的互联网，新的应用程序和更优质的宽带网络，将在未来十年内为大多数企业和家庭带来低成本的通信。
>
> 我认为，未来几年互联网的发展将在很长一段时间内决定整个行业的方向。现在我为互联网分配了最高级别的重要性。我想明确指出，我们对互联网的关注是第一位的。
>
> 自从 IBM 在 1981 年推出 PC 以来，互联网就开始有了巨大的转变。当前的电脑并不完美，个人的体验是相当差的。但是随着 PC 性能的增强，整个行业将找到新的机会。
>
> 互联网的独特地位源于多种要素。TCP / IP 协议很重要，因为是它支持了分布式计算，并且让整个网络得到非常好的扩展性。也许未来地球上的每个人都能连接起来，服务器可能需要承载巨大的流量。
>
> 关于超文本的预测，几十年就有了，而且部分预测已经实现。我相信，带扩展名的页面将成为定义信息呈现方式的新标准。HTML 的各种扩展，包括表格、安全交易等功能将在不久的将来得到广泛采用。也许还能有 3D 展示以支持 VR 购物和社交。
>
> 互联网的另一个独特之处在于，它允许我们以商品的交易方式购买通信线路，通信线路的连接构成了“公共”网络，而“公共”网络的经济性反映了通信技术的进展情况。
>
> 企业连接到互联网的成本取决于你进入互联网的“入口”的大小，而不是实际使用的程度。这意味着，额外使用的边际成本几乎为零。
>
> 最重要的是，互联网可以成为一个发布内容的场所。它有足够的用户，它能从这些用户所贡献的内容的正反馈循环中获益，获得的用户越多，带来的内容就越多，反过来会带动更多用户的加入。
>
> 当然，关于未来互联网的增长，我认为一个重要问题在于它的“临界质量”。现在我们看到，每种在线服务都可以为互联网增加额外价值。我们需要让它的整体价值不断凸显，以吸引用户克服成本考虑，真正地加入进来，让互联网达到爆发增长的“临界质量”。
>
> 我们对这个“临界质量”没有足够明确的答案。但我们能做的是，使各项互联网服务非常，非常便宜——也许是免费的。
> 我关注到两个现象：
>
> 第一，在浏览互联网的过程中，我几乎找不到 Microsoft 能够支持的文件格式。我用了超过 10 个小时，但是没看到单个 Word 文档，AVI 文件，Windows .EXE 或我们能够支持的文件格式。不过我看到了大量的 Quicktime 文件。所有电影制片厂都使用它们来提供电影预告片。可那是属于苹果公司的。
>
> 第二，Internet上另一种流行的文件格式是 PDF，甚至美国国税局也提供 PDF 格式的税表。目前来看 HTML 还有些局限，所以 PDF 是一种标准化的替代方案。Adobe 正在大力投资这项技术。
>
> Quicktime 和 PDF 在网络上很受欢迎，因为它们是跨平台的，读者可以免费获取。一旦这样的格式建立起来，新格式将很难出现（或者变得同样受欢迎）。
>
> 我发现，出生于互联网上的一个竞争对手是 Netscape。他们的浏览器占主导地位，拥有 70％ 的份额。他们正在寻求一种多平台策略，将关键 API 存放到客户端，以使底层操作系统“商品化”。他们吸引了许多公共网络运营商使用他们的平台提供信息和目录服务。我们必须击败他们。
>
> 下一步我们有很多工作要做。如何协调？我的设想是，Paul Maritz 将领导平台化业务，确保 Windows 系统是互联网用户的最佳选择。这是我们的护城河。Nathan 和 Pete 将领导应用程序和内容小组，弄清楚如何通过为互联网提供应用程序和内容来赚钱。
>
> 关于未来，我认为我们已经具有相当大的优势，最主要的是我们的团队，以及 Windows 和Office 被用户广泛接受。我相信当我们进入互联网业务并且尝试扩展的时候，会有很多不确定性。它会是一股改变了原先规则的潮流，对我们来说，这既是机会，也是挑战。

 三个月后，IE 2.0 正式上线，随着微软进军浏览器市场，网景和微软的战争就此真正开始。网景公司的Netscape Navigator与微软公司的Internet Explorer之间的竞争，后来被称为“浏览器大战”。



### 1.3	标准化

1996年8月，微软模仿JavaScript克隆了一种相近的语言，取名为JScript（JavaScript 是 Netscape 的注册商标，微软不能用），首先内置于IE 3.0。  Netscape 公司面临丧失浏览器脚本语言的主导权的局面。 

在微软进入后，有 3 种不同的 JavaScript 版本同时存在：Netscape Navigator 3.0 中的 JavaScript、IE 中的 JScript 以及 CEnvi 中的 ScriptEase。与 C 和其他编程语言不同的是，JavaScript 并没有一个标准来统一其语法或特性。随着版本不同暴露的问题日益加剧，**JavaScript**的规范化最终被提上日程。 

1996年11月，Netscape 公司决定将 JavaScript 提交给国际标准化组织 ECMA（European Computer Manufacturers Association），希望 JavaScript 能够成为国际标准，以此抵抗微软。

1997年7月，ECMA 组织发布262号标准文件（ECMA-262）的第一版，规定了浏览器脚本语言的标准，并将这种语言称为 ECMAScript。这个版本就是 ECMAScript 1.0 版。之所以不叫 JavaScript，一方面是由于商标的关系，Java 是 Sun 公司的商标，根据一份授权协议，只有 Netscape 公司可以合法地使用 JavaScript 这个名字，且 JavaScript 已经被 Netscape 公司注册为商标，另一方面也是想体现这门语言的制定者是 ECMA，不是 Netscape，这样有利于保证这门语言的开放性和中立性。因此，ECMAScript 和 JavaScript 的关系是，前者是后者的规格，后者是前者的一种实现。在日常场合，这两个词是可以互换的。

ECMA-262 标准后来也被另一个国际标准化组织 ISO（International Organization for Standardization）批准，标准号是 ISO-16262。



#### JavaScript的版本

1997年7月，ECMAScript 1.0发布。

1998年6月，ECMAScript 2.0版发布。

1999年12月，ECMAScript 3.0版发布，成为 JavaScript 的通行标准，得到了广泛支持。

2007年10月，ECMAScript 4.0版草案发布，对3.0版做了大幅升级，预计次年8月发布正式版本。草案发布后，由于4.0版的目标过于激进，各方对于是否通过这个标准，发生了严重分歧。以 Yahoo、Microsoft、Google 为首的大公司，反对 JavaScript 的大幅升级，主张小幅改动；以 JavaScript 创造者 Brendan Eich 为首的 Mozilla 公司，则坚持当前的草案。

2008年7月，由于对于下一个版本应该包括哪些功能，各方分歧太大，争论过于激进，ECMA 开会决定，中止 ECMAScript 4.0 的开发（即废除了这个版本），将其中涉及现有功能改善的一小部分，发布为 ECMAScript 3.1，而将其他激进的设想扩大范围，放入以后的版本，由于会议的气氛，该版本的项目代号起名为 Harmony（和谐）。会后不久，ECMAScript 3.1 就改名为 ECMAScript 5。

2009年12月，ECMAScript 5.0版 正式发布。Harmony 项目则一分为二，一些较为可行的设想定名为 JavaScript.next 继续开发，后来演变成 ECMAScript 6；一些不是很成熟的设想，则被视为 JavaScript.next.next，在更远的将来再考虑推出。TC39 的总体考虑是，ECMAScript 5 与 ECMAScript 3 基本保持兼容，较大的语法修正和新功能加入，将由 JavaScript.next 完成。当时，JavaScript.next 指的是ECMAScript 6。第六版发布以后，将指 ECMAScript 7。TC39 预计，ECMAScript 5 会在2013年的年中成为 JavaScript 开发的主流标准，并在此后五年中一直保持这个位置。

2011年6月，ECMAScript 5.1版发布，并且成为 ISO 国际标准（ISO/IEC 16262:2011）。到了2012年底，所有主要浏览器都支持 ECMAScript 5.1版的全部功能。

2013年3月，ECMAScript 6 草案冻结，不再添加新功能。新的功能设想将被放到 ECMAScript 7。

2013年12月，ECMAScript 6 草案发布。然后是12个月的讨论期，听取各方反馈。

2015年6月，ECMAScript 6 正式发布，并且更名为“ECMAScript 2015”。这是因为 TC39 委员会计划，以后每年发布一个 ECMAScript 的版本，下一个版本在2016年发布，称为“ECMAScript 2016”，2017年发布“ECMAScript 2017”，以此类推。



#### ECMAScript和JavaScript的关系

ECMA-262第1版（1997年6月） 本质上与 Netscape 的 JavaScript 1.1相同——只不过作了一些较小的改动： 

* 删除了针对特定浏览器的代码
* 支持Unicode标准
* 对象与平台无关

> 这三条规则奠定了JavaScript的可移植性，比如现在比较火爆的node.JS，是一门服务端语言。试想一下如果JavaScript的特性与特定的浏览器绑定的话，前端将是多么混乱的世界。所以，站的高度不同，分析问题的角度，解决问题的角度也会不同，这就是传说中的格局？

ECMAScript 只用来标准化 JavaScript 这种语言的基本语法结构，与部署环境相关的标准都由其他标准规定，比如 DOM 的标准就是由 W3C组织（World Wide Web Consortium）制定的。因此 **ECMAScript**与Web浏览器没有依赖关系，Web浏览器只是**ECMAScript**实现可能的宿主环境之一。宿主，它不仅提供基本的**JavaScript**的实现，同时也会提供该语言的扩展，比如**DOM**。其他宿主环境还包括**Node**和**Adobe Flash**。 

